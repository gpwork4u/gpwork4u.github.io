<!DOCTYPE html><html lang="en"><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="apple-touch-icon" sizes="180x180" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon.ico"/><link rel="manifest" href="/favicons/site.webmanifest"/><link rel="shortcut icon" href="/favicons/favicon.ico"/><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-config" content="/favicons/browserconfig.xml"/><meta name="theme-color" content="#000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><meta name="description" content="This is GP Blog"/><meta property="og:image" content="https://og-image.vercel.app/Next.js%20Blog%20Starter%20Example.png?theme=light&amp;md=1&amp;fontSize=100px&amp;images=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Ffront%2Fassets%2Fdesign%2Fnextjs-black-logo.svg"/><title>Hackmd api + next.js 在 github 上架 blog | GP BlogMarkdown</title><meta name="next-head-count" content="14"/><link rel="preload" href="./_next/static/css/4249c42f01ffd870.css" as="style"/><link rel="stylesheet" href="./_next/static/css/4249c42f01ffd870.css" data-n-g=""/><link rel="preload" href="./_next/static/css/e1f6961df2961232.css" as="style"/><link rel="stylesheet" href="./_next/static/css/e1f6961df2961232.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="./_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="./_next/static/chunks/webpack-bfe1d48b31130ebc.js" defer=""></script><script src="./_next/static/chunks/framework-91d7f78b5b4003c8.js" defer=""></script><script src="./_next/static/chunks/main-bd817fa5a106f441.js" defer=""></script><script src="./_next/static/chunks/pages/_app-4ee94cf0c493843f.js" defer=""></script><script src="./_next/static/chunks/202-11de5ffdb736e592.js" defer=""></script><script src="./_next/static/chunks/pages/posts/%5Bslug%5D-e6976890815970e8.js" defer=""></script><script src="./_next/static/rEctaoO8p65xhnAYNoVkI/_buildManifest.js" defer=""></script><script src="./_next/static/rEctaoO8p65xhnAYNoVkI/_ssgManifest.js" defer=""></script><script src="./_next/static/rEctaoO8p65xhnAYNoVkI/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><div class="min-h-screen"><main><div class="container mx-auto px-5"><h2 class="text-2xl md:text-4xl font-bold tracking-tight md:tracking-tighter leading-tight mb-20 mt-8"><a class="hover:underline" href="/">Blog</a>.</h2><article class="mb-32"><h1 class="text-6xl md:text-7xl lg:text-8xl font-bold tracking-tighter leading-tight md:leading-none mb-12 text-center md:text-left">Hackmd api + next.js 在 github 上架 blog</h1><div class="max-w-2xl mx-auto"><div class="mb-6 text-lg"><time dateTime="2021-12-20T01:31:07.090Z">December	20, 2021</time></div></div><div class="max-w-2xl mx-auto"><div class="markdown-styles_markdown__h_8de"><h2 id="%E5%89%8D%E8%A8%80" tabindex="-1"><a class="anchor" href="#%E5%89%8D%E8%A8%80"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a> 前言</h2>
<p>之前一直很想做個部落格，中間有試著用 Django 框架寫一個 blog 系統，但想自己架卻總是覺得要租個機器，不太想花那個錢，這件事便一拖再拖，後來發現在臉書上看到了 <a href="#reference">[1.]</a> 的文章 github 上也可以自己架部落格，便開始研究怎麼弄，也順便學了一點 next.js</p>
<h2 id="why-next.js" tabindex="-1"><a class="anchor" href="#why-next.js"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a> why next.js</h2>
<p>首先，要在 github 上架網站都有一個限制，就是僅限靜態網站，因此便需要用到了 next.js 的 SSG 功能，透過這個功能便可以生出部落格靜態的頁面部署到 github 上。</p>
<p>next.js 有提供簡單的部落格範例可以使用，這個專案的內下都是從那個範例做修改的，雖然是從範例改，但由於算是第一次深入接觸 js ，真的是各種撞牆，做了許多嘗試才算完成。</p>
<h2 id="%E6%8E%A5%E4%B8%8A-hackmd-api" tabindex="-1"><a class="anchor" href="#%E6%8E%A5%E4%B8%8A-hackmd-api"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a> 接上 hackmd api</h2>
<p>使用的 api 主要有兩個</p>
<ol>
<li><a href="https://hackmd.io/api/@%7BGroup_id%7D/overview">https://hackmd.io/api/@{Group_id}/overview</a> 取得貼文列表</li>
<li><a href="https://hackmd.io/%7Bnote_id%7D/download">https://hackmd.io/{note_id}/download</a> 取得文章內容</li>
</ol>
<p>細節在 <a href="#reference">[1.]</a> 裡面都有，這邊就不再贅述</p>
<h2 id="markdown-%E8%BD%89-html" tabindex="-1"><a class="anchor" href="#markdown-%E8%BD%89-html"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a> markdown 轉 html</h2>
<p>markdown 轉到 html，這個專案用的是 mardown-it 和 highlight.js。</p>
<p>轉完之後要記得設定 highlight 的 CSS，不然 code 區塊的樣式只會有 html 標籤</p>
<pre><code class="language-javascript"><button class="btn copy-snippet-button position-absolute top-1 right-1"><i class="fas fa-clipboard"></i><i class="fas fa-check"></i><svg aria-hidden="true" role="img" class="StyledOcticon-uhnt7w-0 iIOaoH" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" style="display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></button><table class="fence-wrapper"><tbody><tr><td class="hljs-line-number" data-line-number=1></td><td class="hljs-line" id="LC1"><span class="hljs-comment">// pages/_app.js</span></td></tr><tr><td class="hljs-line-number" data-line-number=2></td><td class="hljs-line" id="LC2"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;../styles/index.css&#x27;</span></td></tr><tr><td class="hljs-line-number" data-line-number=3></td><td class="hljs-line" id="LC3"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;highlight.js/styles/github.css&#x27;</span></td></tr><tr><td class="hljs-line-number" data-line-number=4></td><td class="hljs-line" id="LC4"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">MyApp</span>(<span class="hljs-params">{ Component, pageProps }</span>) {</td></tr><tr><td class="hljs-line-number" data-line-number=5></td><td class="hljs-line" id="LC5">  <span class="hljs-keyword">return</span> &lt;Component {...pageProps} /&gt;</td></tr><tr><td class="hljs-line-number" data-line-number=6></td><td class="hljs-line" id="LC6">}</td></tr></tbody></table></code></pre>
<h2 id="deploy-to-github" tabindex="-1"><a class="anchor" href="#deploy-to-github"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a> deploy to github</h2>
<p>基本上只要設定好 key 跟 github workflow ，就可以透過 github action 自動部署你的網頁。</p>
<p>下面是我的 workflow yml，這個檔案是透過 github action 那邊的選項生出 node.js 的 deploy 模板後，再去<s>剪貼</s>參考其他人的 yml 改的。</p>
<pre><code class="language-yml"><button class="btn copy-snippet-button position-absolute top-1 right-1"><i class="fas fa-clipboard"></i><i class="fas fa-check"></i><svg aria-hidden="true" role="img" class="StyledOcticon-uhnt7w-0 iIOaoH" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" style="display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></button><table class="fence-wrapper"><tbody><tr><td class="hljs-line-number" data-line-number=1></td><td class="hljs-line" id="LC1"><span class="hljs-attr">name:</span> <span class="hljs-string">Deploy</span> <span class="hljs-string">to</span> <span class="hljs-string">Github</span> <span class="hljs-string">Pages</span></td></tr><tr><td class="hljs-line-number" data-line-number=2></td><td class="hljs-line" id="LC2"></td></tr><tr><td class="hljs-line-number" data-line-number=3></td><td class="hljs-line" id="LC3"><span class="hljs-attr">on:</span></td></tr><tr><td class="hljs-line-number" data-line-number=4></td><td class="hljs-line" id="LC4">  <span class="hljs-attr">push:</span></td></tr><tr><td class="hljs-line-number" data-line-number=5></td><td class="hljs-line" id="LC5">    <span class="hljs-attr">branches:</span></td></tr><tr><td class="hljs-line-number" data-line-number=6></td><td class="hljs-line" id="LC6">      <span class="hljs-bullet">-</span> <span class="hljs-string">main</span></td></tr><tr><td class="hljs-line-number" data-line-number=7></td><td class="hljs-line" id="LC7"></td></tr><tr><td class="hljs-line-number" data-line-number=8></td><td class="hljs-line" id="LC8">  <span class="hljs-attr">workflow_dispatch:</span></td></tr><tr><td class="hljs-line-number" data-line-number=9></td><td class="hljs-line" id="LC9"></td></tr><tr><td class="hljs-line-number" data-line-number=10></td><td class="hljs-line" id="LC10"><span class="hljs-attr">jobs:</span></td></tr><tr><td class="hljs-line-number" data-line-number=11></td><td class="hljs-line" id="LC11">  <span class="hljs-attr">deployment:</span></td></tr><tr><td class="hljs-line-number" data-line-number=12></td><td class="hljs-line" id="LC12">    <span class="hljs-attr">runs-on:</span> <span class="hljs-string">ubuntu-latest</span></td></tr><tr><td class="hljs-line-number" data-line-number=13></td><td class="hljs-line" id="LC13"></td></tr><tr><td class="hljs-line-number" data-line-number=14></td><td class="hljs-line" id="LC14">    <span class="hljs-attr">strategy:</span></td></tr><tr><td class="hljs-line-number" data-line-number=15></td><td class="hljs-line" id="LC15">      <span class="hljs-attr">matrix:</span></td></tr><tr><td class="hljs-line-number" data-line-number=16></td><td class="hljs-line" id="LC16">        <span class="hljs-attr">node-version:</span> [<span class="hljs-number">14.</span><span class="hljs-string">x</span>]</td></tr><tr><td class="hljs-line-number" data-line-number=17></td><td class="hljs-line" id="LC17"></td></tr><tr><td class="hljs-line-number" data-line-number=18></td><td class="hljs-line" id="LC18">    <span class="hljs-attr">steps:</span></td></tr><tr><td class="hljs-line-number" data-line-number=19></td><td class="hljs-line" id="LC19">      <span class="hljs-bullet">-</span> <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/checkout@v2</span></td></tr><tr><td class="hljs-line-number" data-line-number=20></td><td class="hljs-line" id="LC20"></td></tr><tr><td class="hljs-line-number" data-line-number=21></td><td class="hljs-line" id="LC21">      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Use</span> <span class="hljs-string">Node.js</span> <span class="hljs-string">${{</span> <span class="hljs-string">matrix.node-version</span> <span class="hljs-string">}}</span></td></tr><tr><td class="hljs-line-number" data-line-number=22></td><td class="hljs-line" id="LC22">        <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/setup-node@v1</span></td></tr><tr><td class="hljs-line-number" data-line-number=23></td><td class="hljs-line" id="LC23">        <span class="hljs-attr">with:</span></td></tr><tr><td class="hljs-line-number" data-line-number=24></td><td class="hljs-line" id="LC24">          <span class="hljs-attr">node-version:</span> <span class="hljs-string">${{</span> <span class="hljs-string">matrix.node-version</span> <span class="hljs-string">}}</span></td></tr><tr><td class="hljs-line-number" data-line-number=25></td><td class="hljs-line" id="LC25"></td></tr><tr><td class="hljs-line-number" data-line-number=26></td><td class="hljs-line" id="LC26">      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Update</span> <span class="hljs-string">NPM</span></td></tr><tr><td class="hljs-line-number" data-line-number=27></td><td class="hljs-line" id="LC27">        <span class="hljs-attr">run:</span> <span class="hljs-string">npm</span> <span class="hljs-string">i</span> <span class="hljs-string">-g</span> <span class="hljs-string">npm@latest</span></td></tr><tr><td class="hljs-line-number" data-line-number=28></td><td class="hljs-line" id="LC28"></td></tr><tr><td class="hljs-line-number" data-line-number=29></td><td class="hljs-line" id="LC29">      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Cache</span> <span class="hljs-string">dependencies</span></td></tr><tr><td class="hljs-line-number" data-line-number=30></td><td class="hljs-line" id="LC30">        <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/cache@v2</span></td></tr><tr><td class="hljs-line-number" data-line-number=31></td><td class="hljs-line" id="LC31">        <span class="hljs-attr">with:</span></td></tr><tr><td class="hljs-line-number" data-line-number=32></td><td class="hljs-line" id="LC32">          <span class="hljs-attr">path:</span> <span class="hljs-string">~/.npm</span></td></tr><tr><td class="hljs-line-number" data-line-number=33></td><td class="hljs-line" id="LC33">          <span class="hljs-attr">key:</span> <span class="hljs-string">${{</span> <span class="hljs-string">runner.OS</span> <span class="hljs-string">}}-node-${{</span> <span class="hljs-string">hashFiles(&#x27;**/package-lock.json&#x27;)</span> <span class="hljs-string">}}</span></td></tr><tr><td class="hljs-line-number" data-line-number=34></td><td class="hljs-line" id="LC34">          <span class="hljs-attr">restore-keys:</span> <span class="hljs-string">|</td></tr><tr><td class="hljs-line-number" data-line-number=35></td><td class="hljs-line" id="LC35">            ${{ runner.OS }}-node-</td></tr><tr><td class="hljs-line-number" data-line-number=36></td><td class="hljs-line" id="LC36">            ${{ runner.OS }}-</td></tr><tr><td class="hljs-line-number" data-line-number=37></td><td class="hljs-line" id="LC37"></span>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Build</span></td></tr><tr><td class="hljs-line-number" data-line-number=38></td><td class="hljs-line" id="LC38">        <span class="hljs-attr">env:</span></td></tr><tr><td class="hljs-line-number" data-line-number=39></td><td class="hljs-line" id="LC39">          <span class="hljs-attr">HACKMD_PROFILE:</span> <span class="hljs-string">${{</span> <span class="hljs-string">secrets.HACKMD_PROFILE</span> <span class="hljs-string">}}</span></td></tr><tr><td class="hljs-line-number" data-line-number=40></td><td class="hljs-line" id="LC40"></td></tr><tr><td class="hljs-line-number" data-line-number=41></td><td class="hljs-line" id="LC41">        <span class="hljs-attr">run:</span> <span class="hljs-string">|</td></tr><tr><td class="hljs-line-number" data-line-number=42></td><td class="hljs-line" id="LC42">          npm i --legacy-peer-deps</td></tr><tr><td class="hljs-line-number" data-line-number=43></td><td class="hljs-line" id="LC43">          npm run build</td></tr><tr><td class="hljs-line-number" data-line-number=44></td><td class="hljs-line" id="LC44"></span>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Deploy</span></td></tr><tr><td class="hljs-line-number" data-line-number=45></td><td class="hljs-line" id="LC45">        <span class="hljs-attr">uses:</span> <span class="hljs-string">peaceiris/actions-gh-pages@v3</span></td></tr><tr><td class="hljs-line-number" data-line-number=46></td><td class="hljs-line" id="LC46">        <span class="hljs-attr">with:</span></td></tr><tr><td class="hljs-line-number" data-line-number=47></td><td class="hljs-line" id="LC47">          <span class="hljs-attr">deploy_key:</span> <span class="hljs-string">${{</span> <span class="hljs-string">secrets.ACTIONS_DEPLOY_KEY</span> <span class="hljs-string">}}</span></td></tr><tr><td class="hljs-line-number" data-line-number=48></td><td class="hljs-line" id="LC48">          <span class="hljs-attr">publish_dir:</span> <span class="hljs-string">./out</span></td></tr><tr><td class="hljs-line-number" data-line-number=49></td><td class="hljs-line" id="LC49"></td></tr></tbody></table></code></pre>
<p>過程中會需要生一組 deploy 的 ssh key</p>
<pre><code class="language-bash"><button class="btn copy-snippet-button position-absolute top-1 right-1"><i class="fas fa-clipboard"></i><i class="fas fa-check"></i><svg aria-hidden="true" role="img" class="StyledOcticon-uhnt7w-0 iIOaoH" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" style="display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></button><table class="fence-wrapper"><tbody><tr><td class="hljs-line-number" data-line-number=1></td><td class="hljs-line" id="LC1">$ ssh-keygen -t rsa -b 4096 -C <span class="hljs-string">&quot;<span class="hljs-subst">$(git config user.email)</span>&quot;</span> -f gh-pages -N <span class="hljs-string">&quot;&quot;</span></td></tr></tbody></table></code></pre>
<p>去 github settings &gt; deploy key 新增一個，並把剛剛生出來的 gh-pages.pub 內容放進去，然後去 secrets 的地方新增一個 secrets ，取個名字後就可以在 deploy 作環境變數使用。</p>
<h2 id="%E5%BF%83%E5%BE%97" tabindex="-1"><a class="anchor" href="#%E5%BF%83%E5%BE%97"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a> 心得</h2>
<p>大概花了快一週的時間做這個，從一開始完全不懂，一直撞牆，到開始慢慢摸熟 next.js，開始會改之後，還滿有成就感的，實際上還滿多細節想要調整，不過這之後再說ㄌ .3.</p>
<h2 id="reference" tabindex="-1"><a class="anchor" href="#reference"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a> reference</h2>
<ol>
<li><a href="https://hackmd.io/@DailyOops/hackmd-as-cms-blog-feat-next-js?type=view">把 HackMD 當做部落格後臺 feat. Next.js
</a></li>
<li><a href="https://nextjs.org/learn/basics/create-nextjs-app">next.js start up</a></li>
<li><a href="https://simonallen.coderbridge.io/2021/07/15/nextjs-export-static/">Next.js 入門：使用 next export 輸出 static file</a></li>
<li><a href="https://github.com/peaceiris/actions-gh-pages#%EF%B8%8F-create-ssh-deploy-key">actions-gh-pages</a></li>
</ol>
</div></div></article></div></main></div><footer class="bg-accent-1 border-t border-accent-2"><div class="container mx-auto px-5"><div class="py-14 flex flex-col lg:flex-row items-center"><h3 class="text-4s lg:text-5s font-bold tracking-tighter leading-tight text-center lg:text-left lg:w-1/2 mx-auto">Statically Generated with Next.js.<span class="badge bg-secondary"><a href="https://github.com/gpwork4u/gpwork4u.github.io" class="mx-3 bg-black hover:bg-white hover:text-black border border-black text-white font-bold py-3 px-12 lg:px-8 duration-200 transition-colors mb-6 lg:mb-0">View on GitHub</a></span></h3></div></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"id":"nNLnd0qeQCuYmrqlICq8ug","title":"Hackmd api + next.js 在 github 上架 blog","content":"\u003ch2 id=\"%E5%89%8D%E8%A8%80\" tabindex=\"-1\"\u003e\u003ca class=\"anchor\" href=\"#%E5%89%8D%E8%A8%80\"\u003e\u003csvg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"\u003e\u003cpath fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003c/a\u003e 前言\u003c/h2\u003e\n\u003cp\u003e之前一直很想做個部落格，中間有試著用 Django 框架寫一個 blog 系統，但想自己架卻總是覺得要租個機器，不太想花那個錢，這件事便一拖再拖，後來發現在臉書上看到了 \u003ca href=\"#reference\"\u003e[1.]\u003c/a\u003e 的文章 github 上也可以自己架部落格，便開始研究怎麼弄，也順便學了一點 next.js\u003c/p\u003e\n\u003ch2 id=\"why-next.js\" tabindex=\"-1\"\u003e\u003ca class=\"anchor\" href=\"#why-next.js\"\u003e\u003csvg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"\u003e\u003cpath fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003c/a\u003e why next.js\u003c/h2\u003e\n\u003cp\u003e首先，要在 github 上架網站都有一個限制，就是僅限靜態網站，因此便需要用到了 next.js 的 SSG 功能，透過這個功能便可以生出部落格靜態的頁面部署到 github 上。\u003c/p\u003e\n\u003cp\u003enext.js 有提供簡單的部落格範例可以使用，這個專案的內下都是從那個範例做修改的，雖然是從範例改，但由於算是第一次深入接觸 js ，真的是各種撞牆，做了許多嘗試才算完成。\u003c/p\u003e\n\u003ch2 id=\"%E6%8E%A5%E4%B8%8A-hackmd-api\" tabindex=\"-1\"\u003e\u003ca class=\"anchor\" href=\"#%E6%8E%A5%E4%B8%8A-hackmd-api\"\u003e\u003csvg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"\u003e\u003cpath fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003c/a\u003e 接上 hackmd api\u003c/h2\u003e\n\u003cp\u003e使用的 api 主要有兩個\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\u003ca href=\"https://hackmd.io/api/@%7BGroup_id%7D/overview\"\u003ehttps://hackmd.io/api/@{Group_id}/overview\u003c/a\u003e 取得貼文列表\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://hackmd.io/%7Bnote_id%7D/download\"\u003ehttps://hackmd.io/{note_id}/download\u003c/a\u003e 取得文章內容\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e細節在 \u003ca href=\"#reference\"\u003e[1.]\u003c/a\u003e 裡面都有，這邊就不再贅述\u003c/p\u003e\n\u003ch2 id=\"markdown-%E8%BD%89-html\" tabindex=\"-1\"\u003e\u003ca class=\"anchor\" href=\"#markdown-%E8%BD%89-html\"\u003e\u003csvg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"\u003e\u003cpath fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003c/a\u003e markdown 轉 html\u003c/h2\u003e\n\u003cp\u003emarkdown 轉到 html，這個專案用的是 mardown-it 和 highlight.js。\u003c/p\u003e\n\u003cp\u003e轉完之後要記得設定 highlight 的 CSS，不然 code 區塊的樣式只會有 html 標籤\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003e\u003cbutton class=\"btn copy-snippet-button position-absolute top-1 right-1\"\u003e\u003ci class=\"fas fa-clipboard\"\u003e\u003c/i\u003e\u003ci class=\"fas fa-check\"\u003e\u003c/i\u003e\u003csvg aria-hidden=\"true\" role=\"img\" class=\"StyledOcticon-uhnt7w-0 iIOaoH\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\" fill=\"currentColor\" style=\"display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible\"\u003e\u003cpath fill-rule=\"evenodd\" d=\"M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z\"\u003e\u003c/path\u003e\u003cpath fill-rule=\"evenodd\" d=\"M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003c/button\u003e\u003ctable class=\"fence-wrapper\"\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"hljs-line-number\" data-line-number=1\u003e\u003c/td\u003e\u003ctd class=\"hljs-line\" id=\"LC1\"\u003e\u003cspan class=\"hljs-comment\"\u003e// pages/_app.js\u003c/span\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd class=\"hljs-line-number\" data-line-number=2\u003e\u003c/td\u003e\u003ctd class=\"hljs-line\" id=\"LC2\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026#x27;../styles/index.css\u0026#x27;\u003c/span\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd class=\"hljs-line-number\" data-line-number=3\u003e\u003c/td\u003e\u003ctd class=\"hljs-line\" id=\"LC3\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026#x27;highlight.js/styles/github.css\u0026#x27;\u003c/span\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd class=\"hljs-line-number\" data-line-number=4\u003e\u003c/td\u003e\u003ctd class=\"hljs-line\" id=\"LC4\"\u003e\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eMyApp\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e{ Component, pageProps }\u003c/span\u003e) {\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd class=\"hljs-line-number\" data-line-number=5\u003e\u003c/td\u003e\u003ctd class=\"hljs-line\" id=\"LC5\"\u003e  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u0026lt;Component {...pageProps} /\u0026gt;\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd class=\"hljs-line-number\" data-line-number=6\u003e\u003c/td\u003e\u003ctd class=\"hljs-line\" id=\"LC6\"\u003e}\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"deploy-to-github\" tabindex=\"-1\"\u003e\u003ca class=\"anchor\" href=\"#deploy-to-github\"\u003e\u003csvg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"\u003e\u003cpath fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003c/a\u003e deploy to github\u003c/h2\u003e\n\u003cp\u003e基本上只要設定好 key 跟 github workflow ，就可以透過 github action 自動部署你的網頁。\u003c/p\u003e\n\u003cp\u003e下面是我的 workflow yml，這個檔案是透過 github action 那邊的選項生出 node.js 的 deploy 模板後，再去\u003cs\u003e剪貼\u003c/s\u003e參考其他人的 yml 改的。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-yml\"\u003e\u003cbutton class=\"btn copy-snippet-button position-absolute top-1 right-1\"\u003e\u003ci class=\"fas fa-clipboard\"\u003e\u003c/i\u003e\u003ci class=\"fas fa-check\"\u003e\u003c/i\u003e\u003csvg aria-hidden=\"true\" role=\"img\" class=\"StyledOcticon-uhnt7w-0 iIOaoH\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\" fill=\"currentColor\" style=\"display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible\"\u003e\u003cpath fill-rule=\"evenodd\" d=\"M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z\"\u003e\u003c/path\u003e\u003cpath fill-rule=\"evenodd\" d=\"M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003c/button\u003e\u003ctable class=\"fence-wrapper\"\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"hljs-line-number\" data-line-number=1\u003e\u003c/td\u003e\u003ctd class=\"hljs-line\" id=\"LC1\"\u003e\u003cspan class=\"hljs-attr\"\u003ename:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eDeploy\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eto\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eGithub\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ePages\u003c/span\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd class=\"hljs-line-number\" data-line-number=2\u003e\u003c/td\u003e\u003ctd class=\"hljs-line\" id=\"LC2\"\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd class=\"hljs-line-number\" data-line-number=3\u003e\u003c/td\u003e\u003ctd class=\"hljs-line\" id=\"LC3\"\u003e\u003cspan class=\"hljs-attr\"\u003eon:\u003c/span\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd class=\"hljs-line-number\" data-line-number=4\u003e\u003c/td\u003e\u003ctd class=\"hljs-line\" id=\"LC4\"\u003e  \u003cspan class=\"hljs-attr\"\u003epush:\u003c/span\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd class=\"hljs-line-number\" data-line-number=5\u003e\u003c/td\u003e\u003ctd class=\"hljs-line\" id=\"LC5\"\u003e    \u003cspan class=\"hljs-attr\"\u003ebranches:\u003c/span\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd class=\"hljs-line-number\" data-line-number=6\u003e\u003c/td\u003e\u003ctd class=\"hljs-line\" id=\"LC6\"\u003e      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003emain\u003c/span\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd class=\"hljs-line-number\" data-line-number=7\u003e\u003c/td\u003e\u003ctd class=\"hljs-line\" id=\"LC7\"\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd class=\"hljs-line-number\" data-line-number=8\u003e\u003c/td\u003e\u003ctd class=\"hljs-line\" id=\"LC8\"\u003e  \u003cspan class=\"hljs-attr\"\u003eworkflow_dispatch:\u003c/span\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd class=\"hljs-line-number\" data-line-number=9\u003e\u003c/td\u003e\u003ctd class=\"hljs-line\" id=\"LC9\"\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd class=\"hljs-line-number\" data-line-number=10\u003e\u003c/td\u003e\u003ctd class=\"hljs-line\" id=\"LC10\"\u003e\u003cspan class=\"hljs-attr\"\u003ejobs:\u003c/span\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd class=\"hljs-line-number\" data-line-number=11\u003e\u003c/td\u003e\u003ctd class=\"hljs-line\" id=\"LC11\"\u003e  \u003cspan class=\"hljs-attr\"\u003edeployment:\u003c/span\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd class=\"hljs-line-number\" data-line-number=12\u003e\u003c/td\u003e\u003ctd class=\"hljs-line\" id=\"LC12\"\u003e    \u003cspan class=\"hljs-attr\"\u003eruns-on:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eubuntu-latest\u003c/span\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd class=\"hljs-line-number\" data-line-number=13\u003e\u003c/td\u003e\u003ctd class=\"hljs-line\" id=\"LC13\"\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd class=\"hljs-line-number\" data-line-number=14\u003e\u003c/td\u003e\u003ctd class=\"hljs-line\" id=\"LC14\"\u003e    \u003cspan class=\"hljs-attr\"\u003estrategy:\u003c/span\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd class=\"hljs-line-number\" data-line-number=15\u003e\u003c/td\u003e\u003ctd class=\"hljs-line\" id=\"LC15\"\u003e      \u003cspan class=\"hljs-attr\"\u003ematrix:\u003c/span\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd class=\"hljs-line-number\" data-line-number=16\u003e\u003c/td\u003e\u003ctd class=\"hljs-line\" id=\"LC16\"\u003e        \u003cspan class=\"hljs-attr\"\u003enode-version:\u003c/span\u003e [\u003cspan class=\"hljs-number\"\u003e14.\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003ex\u003c/span\u003e]\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd class=\"hljs-line-number\" data-line-number=17\u003e\u003c/td\u003e\u003ctd class=\"hljs-line\" id=\"LC17\"\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd class=\"hljs-line-number\" data-line-number=18\u003e\u003c/td\u003e\u003ctd class=\"hljs-line\" id=\"LC18\"\u003e    \u003cspan class=\"hljs-attr\"\u003esteps:\u003c/span\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd class=\"hljs-line-number\" data-line-number=19\u003e\u003c/td\u003e\u003ctd class=\"hljs-line\" id=\"LC19\"\u003e      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003euses:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eactions/checkout@v2\u003c/span\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd class=\"hljs-line-number\" data-line-number=20\u003e\u003c/td\u003e\u003ctd class=\"hljs-line\" id=\"LC20\"\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd class=\"hljs-line-number\" data-line-number=21\u003e\u003c/td\u003e\u003ctd class=\"hljs-line\" id=\"LC21\"\u003e      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ename:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eUse\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eNode.js\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e${{\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ematrix.node-version\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e}}\u003c/span\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd class=\"hljs-line-number\" data-line-number=22\u003e\u003c/td\u003e\u003ctd class=\"hljs-line\" id=\"LC22\"\u003e        \u003cspan class=\"hljs-attr\"\u003euses:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eactions/setup-node@v1\u003c/span\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd class=\"hljs-line-number\" data-line-number=23\u003e\u003c/td\u003e\u003ctd class=\"hljs-line\" id=\"LC23\"\u003e        \u003cspan class=\"hljs-attr\"\u003ewith:\u003c/span\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd class=\"hljs-line-number\" data-line-number=24\u003e\u003c/td\u003e\u003ctd class=\"hljs-line\" id=\"LC24\"\u003e          \u003cspan class=\"hljs-attr\"\u003enode-version:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e${{\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ematrix.node-version\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e}}\u003c/span\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd class=\"hljs-line-number\" data-line-number=25\u003e\u003c/td\u003e\u003ctd class=\"hljs-line\" id=\"LC25\"\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd class=\"hljs-line-number\" data-line-number=26\u003e\u003c/td\u003e\u003ctd class=\"hljs-line\" id=\"LC26\"\u003e      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ename:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eUpdate\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eNPM\u003c/span\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd class=\"hljs-line-number\" data-line-number=27\u003e\u003c/td\u003e\u003ctd class=\"hljs-line\" id=\"LC27\"\u003e        \u003cspan class=\"hljs-attr\"\u003erun:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003enpm\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ei\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e-g\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003enpm@latest\u003c/span\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd class=\"hljs-line-number\" data-line-number=28\u003e\u003c/td\u003e\u003ctd class=\"hljs-line\" id=\"LC28\"\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd class=\"hljs-line-number\" data-line-number=29\u003e\u003c/td\u003e\u003ctd class=\"hljs-line\" id=\"LC29\"\u003e      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ename:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eCache\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003edependencies\u003c/span\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd class=\"hljs-line-number\" data-line-number=30\u003e\u003c/td\u003e\u003ctd class=\"hljs-line\" id=\"LC30\"\u003e        \u003cspan class=\"hljs-attr\"\u003euses:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eactions/cache@v2\u003c/span\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd class=\"hljs-line-number\" data-line-number=31\u003e\u003c/td\u003e\u003ctd class=\"hljs-line\" id=\"LC31\"\u003e        \u003cspan class=\"hljs-attr\"\u003ewith:\u003c/span\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd class=\"hljs-line-number\" data-line-number=32\u003e\u003c/td\u003e\u003ctd class=\"hljs-line\" id=\"LC32\"\u003e          \u003cspan class=\"hljs-attr\"\u003epath:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e~/.npm\u003c/span\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd class=\"hljs-line-number\" data-line-number=33\u003e\u003c/td\u003e\u003ctd class=\"hljs-line\" id=\"LC33\"\u003e          \u003cspan class=\"hljs-attr\"\u003ekey:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e${{\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003erunner.OS\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e}}-node-${{\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ehashFiles(\u0026#x27;**/package-lock.json\u0026#x27;)\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e}}\u003c/span\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd class=\"hljs-line-number\" data-line-number=34\u003e\u003c/td\u003e\u003ctd class=\"hljs-line\" id=\"LC34\"\u003e          \u003cspan class=\"hljs-attr\"\u003erestore-keys:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e|\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd class=\"hljs-line-number\" data-line-number=35\u003e\u003c/td\u003e\u003ctd class=\"hljs-line\" id=\"LC35\"\u003e            ${{ runner.OS }}-node-\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd class=\"hljs-line-number\" data-line-number=36\u003e\u003c/td\u003e\u003ctd class=\"hljs-line\" id=\"LC36\"\u003e            ${{ runner.OS }}-\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd class=\"hljs-line-number\" data-line-number=37\u003e\u003c/td\u003e\u003ctd class=\"hljs-line\" id=\"LC37\"\u003e\u003c/span\u003e      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ename:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eBuild\u003c/span\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd class=\"hljs-line-number\" data-line-number=38\u003e\u003c/td\u003e\u003ctd class=\"hljs-line\" id=\"LC38\"\u003e        \u003cspan class=\"hljs-attr\"\u003eenv:\u003c/span\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd class=\"hljs-line-number\" data-line-number=39\u003e\u003c/td\u003e\u003ctd class=\"hljs-line\" id=\"LC39\"\u003e          \u003cspan class=\"hljs-attr\"\u003eHACKMD_PROFILE:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e${{\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003esecrets.HACKMD_PROFILE\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e}}\u003c/span\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd class=\"hljs-line-number\" data-line-number=40\u003e\u003c/td\u003e\u003ctd class=\"hljs-line\" id=\"LC40\"\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd class=\"hljs-line-number\" data-line-number=41\u003e\u003c/td\u003e\u003ctd class=\"hljs-line\" id=\"LC41\"\u003e        \u003cspan class=\"hljs-attr\"\u003erun:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e|\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd class=\"hljs-line-number\" data-line-number=42\u003e\u003c/td\u003e\u003ctd class=\"hljs-line\" id=\"LC42\"\u003e          npm i --legacy-peer-deps\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd class=\"hljs-line-number\" data-line-number=43\u003e\u003c/td\u003e\u003ctd class=\"hljs-line\" id=\"LC43\"\u003e          npm run build\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd class=\"hljs-line-number\" data-line-number=44\u003e\u003c/td\u003e\u003ctd class=\"hljs-line\" id=\"LC44\"\u003e\u003c/span\u003e      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ename:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eDeploy\u003c/span\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd class=\"hljs-line-number\" data-line-number=45\u003e\u003c/td\u003e\u003ctd class=\"hljs-line\" id=\"LC45\"\u003e        \u003cspan class=\"hljs-attr\"\u003euses:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003epeaceiris/actions-gh-pages@v3\u003c/span\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd class=\"hljs-line-number\" data-line-number=46\u003e\u003c/td\u003e\u003ctd class=\"hljs-line\" id=\"LC46\"\u003e        \u003cspan class=\"hljs-attr\"\u003ewith:\u003c/span\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd class=\"hljs-line-number\" data-line-number=47\u003e\u003c/td\u003e\u003ctd class=\"hljs-line\" id=\"LC47\"\u003e          \u003cspan class=\"hljs-attr\"\u003edeploy_key:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e${{\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003esecrets.ACTIONS_DEPLOY_KEY\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e}}\u003c/span\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd class=\"hljs-line-number\" data-line-number=48\u003e\u003c/td\u003e\u003ctd class=\"hljs-line\" id=\"LC48\"\u003e          \u003cspan class=\"hljs-attr\"\u003epublish_dir:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e./out\u003c/span\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd class=\"hljs-line-number\" data-line-number=49\u003e\u003c/td\u003e\u003ctd class=\"hljs-line\" id=\"LC49\"\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e過程中會需要生一組 deploy 的 ssh key\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-bash\"\u003e\u003cbutton class=\"btn copy-snippet-button position-absolute top-1 right-1\"\u003e\u003ci class=\"fas fa-clipboard\"\u003e\u003c/i\u003e\u003ci class=\"fas fa-check\"\u003e\u003c/i\u003e\u003csvg aria-hidden=\"true\" role=\"img\" class=\"StyledOcticon-uhnt7w-0 iIOaoH\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\" fill=\"currentColor\" style=\"display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible\"\u003e\u003cpath fill-rule=\"evenodd\" d=\"M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z\"\u003e\u003c/path\u003e\u003cpath fill-rule=\"evenodd\" d=\"M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003c/button\u003e\u003ctable class=\"fence-wrapper\"\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"hljs-line-number\" data-line-number=1\u003e\u003c/td\u003e\u003ctd class=\"hljs-line\" id=\"LC1\"\u003e$ ssh-keygen -t rsa -b 4096 -C \u003cspan class=\"hljs-string\"\u003e\u0026quot;\u003cspan class=\"hljs-subst\"\u003e$(git config user.email)\u003c/span\u003e\u0026quot;\u003c/span\u003e -f gh-pages -N \u003cspan class=\"hljs-string\"\u003e\u0026quot;\u0026quot;\u003c/span\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e去 github settings \u0026gt; deploy key 新增一個，並把剛剛生出來的 gh-pages.pub 內容放進去，然後去 secrets 的地方新增一個 secrets ，取個名字後就可以在 deploy 作環境變數使用。\u003c/p\u003e\n\u003ch2 id=\"%E5%BF%83%E5%BE%97\" tabindex=\"-1\"\u003e\u003ca class=\"anchor\" href=\"#%E5%BF%83%E5%BE%97\"\u003e\u003csvg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"\u003e\u003cpath fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003c/a\u003e 心得\u003c/h2\u003e\n\u003cp\u003e大概花了快一週的時間做這個，從一開始完全不懂，一直撞牆，到開始慢慢摸熟 next.js，開始會改之後，還滿有成就感的，實際上還滿多細節想要調整，不過這之後再說ㄌ .3.\u003c/p\u003e\n\u003ch2 id=\"reference\" tabindex=\"-1\"\u003e\u003ca class=\"anchor\" href=\"#reference\"\u003e\u003csvg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"\u003e\u003cpath fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003c/a\u003e reference\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e\u003ca href=\"https://hackmd.io/@DailyOops/hackmd-as-cms-blog-feat-next-js?type=view\"\u003e把 HackMD 當做部落格後臺 feat. Next.js\n\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://nextjs.org/learn/basics/create-nextjs-app\"\u003enext.js start up\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://simonallen.coderbridge.io/2021/07/15/nextjs-export-static/\"\u003eNext.js 入門：使用 next export 輸出 static file\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/peaceiris/actions-gh-pages#%EF%B8%8F-create-ssh-deploy-key\"\u003eactions-gh-pages\u003c/a\u003e\u003c/li\u003e\n\u003c/ol\u003e\n","slug":"nNLnd0qeQCuYmrqlICq8ug","tags":["web"],"createdAt":"2021-12-20T01:31:07.090Z","lastchangeAt":"2021-12-27T14:28:25.095Z"}},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"nNLnd0qeQCuYmrqlICq8ug"},"buildId":"rEctaoO8p65xhnAYNoVkI","assetPrefix":".","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>